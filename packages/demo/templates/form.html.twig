{% extends 'base.html.twig' %}

{% block title %}Form Demo - DaisyUI Theme{% endblock %}
{% block description %}Demo of DaisyUI form theme for Symfony with htmx - styled inputs, validation states, and seamless form submission.{% endblock %}
{% block csrf %}{{ htmx_csrf_meta() }}{% endblock %}

{% block body %}
<div class="mb-6">
    <h1 class="text-3xl font-bold">DaisyUI Form Theme Demo</h1>
    <p class="text-base-content/70">This demo showcases the <code class="badge badge-ghost">daisyui_htmx_layout</code> form theme. All form fields are rendered with simple <code class="badge badge-ghost">form_row()</code> calls.</p>
</div>

<div id="form-wrapper">
    {{ block('formContent') }}
</div>
{% endblock %}

{% block formContent %}
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
    {# Left Column - Form #}
    <div class="card bg-base-100 shadow-xl">
        <div class="card-body">
            <h2 class="card-title mb-4">Registration Form</h2>

            {{ form_start(form, {
                'attr': {
                    'hx-post': path('app_form'),
                    'hx-target': '#form-wrapper',
                    'hx-swap': 'innerHTML',
                    'novalidate': 'novalidate',
                }
            }) }}

            {% if not form.vars.valid and form.vars.submitted %}
            <div class="alert alert-error shadow-lg mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" class="stroke-current shrink-0 h-6 w-6" fill="none" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>
                <span>Please fix the validation errors below.</span>
            </div>
            {% endif %}

            {# Simple form_row() calls - all styling comes from the theme #}
            {{ form_row(form.name) }}
            {{ form_row(form.email) }}
            {{ form_row(form.password) }}
            {{ form_row(form.bio) }}
            {{ form_row(form.country) }}

            <div class="divider">Preferences</div>

            {{ form_row(form.role) }}
            {{ form_row(form.notifications) }}
            {{ form_row(form.terms) }}

            <div class="mt-4">
                {{ form_row(form.submit) }}
            </div>

            {{ form_end(form) }}
        </div>
    </div>

    {# Right Column - Info #}
    <div class="space-y-6">
        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title">Theme Usage</h2>
                <p class="text-sm text-base-content/70 mb-4">The form theme is configured in <code class="badge badge-ghost badge-sm">twig.yaml</code>:</p>

                <div class="mockup-code text-xs">
                    <pre><code>twig:
    form_themes:
        - '@MdxplHtmx/Form/daisyui_htmx_layout.html.twig'</code></pre>
                </div>

                <p class="text-sm text-base-content/70 mt-4">Then render forms with simple calls:</p>

                <div class="mockup-code text-xs">
                    <pre><code>&#123;# All styling comes from the theme #&#125;
&#123;&#123; form_row(form.email) &#125;&#125;
&#123;&#123; form_row(form.password) &#125;&#125;

&#123;# Or render entire form at once #&#125;
&#123;&#123; form(form) &#125;&#125;</code></pre>
                </div>
            </div>
        </div>

        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title">Available Themes</h2>
                <table class="table table-sm">
                    <thead>
                        <tr>
                            <th>Theme</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code class="badge badge-ghost badge-xs">daisyui_layout</code></td>
                            <td>Pure DaisyUI styling</td>
                        </tr>
                        <tr>
                            <td><code class="badge badge-ghost badge-xs">daisyui_htmx_layout</code></td>
                            <td>DaisyUI + htmx indicators</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="card bg-base-100 shadow-xl">
            <div class="card-body">
                <h2 class="card-title">Styled Elements</h2>
                <ul class="list-disc list-inside text-sm text-base-content/70 space-y-1">
                    <li>Text inputs with <code class="badge badge-ghost badge-xs">input-bordered</code></li>
                    <li>Textareas with <code class="badge badge-ghost badge-xs">textarea-bordered</code></li>
                    <li>Selects with <code class="badge badge-ghost badge-xs">select-bordered</code></li>
                    <li>Checkboxes with <code class="badge badge-ghost badge-xs">checkbox</code></li>
                    <li>Radio buttons with <code class="badge badge-ghost badge-xs">radio</code></li>
                    <li>Buttons with <code class="badge badge-ghost badge-xs">btn btn-primary</code></li>
                    <li>Error states with <code class="badge badge-ghost badge-xs">*-error</code> classes</li>
                    <li>Help text with <code class="badge badge-ghost badge-xs">label-text-alt</code></li>
                </ul>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block success %}
<div class="card bg-success text-success-content shadow-xl">
    <div class="card-body">
        <h2 class="card-title">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            Registration Successful!
        </h2>

        <div class="mt-4">
            <h3 class="font-semibold mb-2">Submitted Data:</h3>
            <div class="bg-success-content/10 rounded-lg p-4">
                <pre class="text-sm whitespace-pre-wrap">{{ data|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
            </div>
        </div>

        <div class="card-actions justify-end mt-4">
            <button class="btn btn-outline"
                    hx-get="{{ path('app_form') }}"
                    hx-target="#form-wrapper"
                    hx-swap="innerHTML">
                Submit Another
            </button>
        </div>
    </div>
</div>
{% endblock %}
