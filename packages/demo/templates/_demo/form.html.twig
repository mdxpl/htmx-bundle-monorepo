{% block _main %}
<div id="form-wrapper">
    {{ block('formContent') }}
</div>
{% endblock %}

{% block formContent %}
{% if not form.vars.valid and form.vars.submitted %}
<div class="alert-error">
    <strong>Error:</strong> Please fix the validation errors below.
</div>
{% endif %}

{{ form_start(form, {
    'attr': {
        'hx-post': path('app_form'),
        'hx-target': '#form-wrapper',
        'hx-swap': 'innerHTML',
        'novalidate': 'novalidate',
    }
}) }}
{{ form_rest(form) }}
{{ form_end(form) }}
{% endblock %}

{% block success %}
<article>
    <header>
        <strong>Registration Successful!</strong>
    </header>

    <h4>Submitted Data:</h4>
    <pre>{{ data|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>

    <footer>
        <button class="outline"
                hx-get="{{ path('app_form') }}"
                hx-target="#form-wrapper"
                hx-swap="innerHTML">
            Submit Another
        </button>
    </footer>
</article>
{% endblock %}
