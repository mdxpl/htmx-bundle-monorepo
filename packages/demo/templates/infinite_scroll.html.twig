{% extends 'demo.html.twig' %}

{% set demo_title = 'Infinite Scroll' %}
{% set demo_description = 'Scroll down to load more items automatically. Uses htmx preload extension to fetch next page in background.' %}
{% set demo_controller = 'InfiniteScrollController.php' %}
{% set demo_template = '_demo/infinite_scroll.html.twig' %}

{% use '_demo/infinite_scroll.html.twig' %}

{% block demo_scripts %}
<script src="https://unpkg.com/htmx-ext-preload@2.1.0/preload.js"></script>
{% endblock %}

{% block demo_header %}
<p><small>Uses <kbd>preload="init"</kbd> to fetch next page immediately after current one loads. When you scroll down, the content is already cached - instant display!</small></p>
<p><small><strong>Tip:</strong> You can navigate directly to any page via URL, e.g. <a href="{{ path('app_infinite_scroll', {'page': totalPages}) }}">jump to last page</a>.</small></p>
{% endblock %}

{% block demo %}
{% if currentPage > 1 %}
<article aria-label="Warning">
    <p><mark>You're viewing from page {{ currentPage }} of {{ totalPages }}.</mark> Earlier items are not loaded.
    <a href="{{ path('app_infinite_scroll') }}" role="button" class="outline btn-sm">Back to start</a></p>
</article>
{% endif %}

{{ block('_main') }}
{% endblock %}
