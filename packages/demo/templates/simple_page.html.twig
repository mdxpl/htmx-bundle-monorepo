{% extends 'base.html.twig' %}

{% block title %}{{ page.name }} - Simple Page Demo{% endblock %}

{% block body %}
<div class="mb-6">
    <h1 class="text-3xl font-bold">Simple Page Navigation</h1>
    <p class="text-base-content/70">Click the buttons below to load different pages without a full page reload.</p>
    <p class="text-base-content/70 text-sm mt-2">Uses <code class="badge badge-ghost badge-sm">hx-swap-oob</code> to update both content and navigation buttons in a single response.</p>
</div>

{{ block('pageNav') }}

<div id="pageContent">
    {{ block('pageContentInner') }}
</div>
{% endblock %}

{% block pageNav %}
<div id="page-nav" class="flex flex-wrap gap-2 mb-6">
    {% for slug, item in menu %}
    <button class="btn {{ currentSlug == slug ? 'btn-primary' : 'btn-outline' }}"
            aria-current="{{ currentSlug == slug ? 'true' : 'false' }}"
            hx-get="{{ path('app_simple_page', {'slug': slug}) }}"
            hx-push-url="true"
            hx-target="#pageContent"
            hx-swap="innerHTML"
            hx-indicator="#page-loading">
        {{ item.name }}
    </button>
    {% endfor %}
    <span id="page-loading" class="htmx-indicator">
        <span class="loading loading-spinner loading-sm"></span>
    </span>
</div>
{% endblock %}

{% block pageNavOob %}
<div id="page-nav" hx-swap-oob="true" class="flex flex-wrap gap-2 mb-6">
    {% for slug, item in menu %}
    <button class="btn {{ currentSlug == slug ? 'btn-primary' : 'btn-outline' }}"
            aria-current="{{ currentSlug == slug ? 'true' : 'false' }}"
            hx-get="{{ path('app_simple_page', {'slug': slug}) }}"
            hx-push-url="true"
            hx-target="#pageContent"
            hx-swap="innerHTML"
            hx-indicator="#page-loading">
        {{ item.name }}
    </button>
    {% endfor %}
    <span id="page-loading" class="htmx-indicator">
        <span class="loading loading-spinner loading-sm"></span>
    </span>
</div>
{% endblock %}

{% block pageContentInner %}
<div class="card bg-base-100 shadow-xl">
    <div class="card-body">
        <h2 class="card-title">{{ page.name }}</h2>
        <p>{{ page.description }}</p>
    </div>
</div>
{% endblock %}

{% block pageContentPartial %}
<title>{{ page.name }} - Simple Page Demo</title>
{{ block('pageContentInner') }}
{% endblock %}

{% block sourceCode %}
{% include '_source_code.html.twig' with {controller: 'SimplePageController.php', template: 'simple_page.html.twig'} %}
{% endblock %}
